# Demonstration the Decryption of Secure GeoPackage Format with QGIS
The Secure GeoPackage format is compliant with the OGC GeoPackage for Features or Tiles. It is therefore possible to load the Secure GeoPackage for Features as a Vector Layer into QGIS. Similarly, it is possible to load the Secure GeoPackage for Tiles as a Raster Layer into QGIS.

Even tough the Secure GeoPackage can be loaded with QGIS, the encrypted data is not accessible. For the Features version, QGIS displays the `data` column as BLOB. For the Tiles version, QGIS renders an empty canvas.

## Setting up QGIS
The following demonstration is using a QGIS version 3.22. Another version might also work but was not tested. Please download and install QGIS from the official site: [QGIS Download](https://www.qgis.org/en/site/forusers/download.html)

After starting QGIS, please install the Secure GeoPackage Decryption plugins for Features and Tiles. Both plugins are demonstration prototypes and should not be used in any production environment!

**_NOTE:_** The plugins are provided AS IS. Installation and use AT YOUR OWN RISK.

To install the plugins, please navigate to the QGIS menu `Plugins / Manage and Install Plugins...`. From the dialog box use `Install from ZIP`. The plugin to decrypt the Secure GeoPackage for Features is available from the file `decrypt_attributes.zip` and the plugin to decryt the Secure GeoPackage for Tiles is available from the file `decrypt_tiles.zip`.

After the installation of the plugins, the Python plugin toolbar should contain the representing icons:

[image_ref_toolbar]: data:image/png;base64,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

## Get a Secure GeoPackage
A GeoServer deployment including the Geoserver-GeoPackage-Encrption-Plugin module is available for the OGC Disaster Pilot project. This demonstration deployment is operated by Secure Dimensions. The OpenAPI description of the WMS and WFS services can be used to fetch Secure GeoPackage easily via the [OpenAPI page](https://ogc.secure-dimensions.com/geoserver-dp/api). 

At the top of the page, you find a description how to request a Secure GeoPackage. You als find links to required services.

## Decrypting Secure GeoPackage
Once the Secure GeoPackage for Features is downloaded, you can simply use `drag & drop` to open the GeoPackage with QGIS.

### Decrypt Feature Attributes
To decrypt feature attributes, please select the feature(s) of interest. Then execute the plugin `Decrypt Attributes` by clicking the symbol from the Python toolbar. You see a dialog box that asks for a Bearer Access Token. You can use the same token used to obtain the Secure GeoPackage assuming it is still valid (expiration time is 30 minutes). To see the result of the plugin, you must open the Python Console.

### Decrypt Tiles
To decrypt tiles, please select the layer of interest. Then execute the plugin `Decryp Tiles` by clikcing the symbol from the Python toolbar. You see a dialog box that asks for a Bearer Access Token. You can use the same token used to obtain the Secure GeoPackage assuming it is still valid (expiration time is 30 minutes). A successful execution of the plugin will create a new layer with the same name. This new layer displays the decrypted tiles.

## Help
The above demonstration has mandatory services which result from OGC Innovation Program projects. Therefore, the required services to run the demonstration will be available until mid 2022. Please contact [Secure Dimensions](mailto:support@secure-dimensions.de) if you have any questions.










